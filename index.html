<!DOCTYPE html>
<html>

<head>
    <title>School Scores</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
        #map {
            height: 100%;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style> 
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<body>
    <div id="map"></div>
    <script>
        var map;
        function initMap() {
            //Get school data 

            var mapOptions = {
 
                center: { lat: -37.81569599, lng: 144.965091 }, //Melbourne
                zoom: 12,
                styles: [
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#193341"
                            }
                        ]
                    },
                    {
                        "featureType": "landscape",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#2c5a71"
                            }
                        ]
                    },
                    {
                        "featureType": "road",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#29768a"
                            },
                            {
                                "lightness": -37
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#406d80"
                            }
                        ]
                    },
                    {
                        "featureType": "transit",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#406d80"
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.stroke",
                        "stylers": [
                            {
                                "visibility": "on"
                            },
                            {
                                "color": "#3e606f"
                            },
                            {
                                "weight": 2
                            },
                            {
                                "gamma": 0.84
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            }
                        ]
                    },
                    {
                        "featureType": "administrative",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "weight": 0.6
                            },
                            {
                                "color": "#1a3541"
                            }
                        ]
                    },
                    {
                        "elementType": "labels.icon",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#2c5a71"
                            }
                        ]
                    }
                ]
            };
            map = new google.maps.Map(document.getElementById('map'), mapOptions);
            $.get("https://pbhasi.github.io/schoolscores/data/schoolscores.json", 
                function(data, status){
                    data.forEach(function(school) {
                        var latlng = {};
                        latlng.lat = school.latitude;
                        latlng.lng = school.longitude;
                        //console.log(latlng);
                        var marker = new google.maps.Marker({
                            position: latlng,
                            title: school.schoolname,
                            clickable: true,
                            opacity: 0.5

                        });
                        marker.setMap(map);                      

                    }, this);
                });

        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZlWKvJkg04PPJ9UsWAD-Ld1noAPzp03M&callback=initMap" async
        defer></script>
</body>

</html>